<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curricolo Verticale - Servizi per la Sanit√† e l'Assistenza Sociale</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header page-hero">
            <div class="hero-card">
                <h1>Curricolo Verticale - Servizi per la Sanit√† e l'Assistenza Sociale</h1>
                <div class="subline">IIS Meucci - Mattei Cagliari, Sede Decimomannu</div>
                <p class="subtitle">Competenze di indirizzo, ai sensi del Decreto del Ministro dell‚Äôistruzione,
                    dell‚Äôuniversit√† e della ricerca 24 maggio 2018, n. 92, Allegato C</p>
            </div>
        </header>

        <!-- Statistiche generali -->
        <div class="stats-grid">
            <div class="stat-card blue">
                <div class="stat-header">
                    <span class="stat-icon">üìö</span>
                    <span class="stat-label">Competenze</span>
                </div>
                <div class="stat-value">10</div>
                <div class="stat-subtitle">37 traguardi totali</div>
            </div>

            <div class="stat-card green">
                <div class="stat-header">
                    <span class="stat-icon">üë•</span>
                    <span class="stat-label">Insegnamenti</span>
                </div>
                <div class="stat-value">14</div>
                <div class="stat-subtitle">Materie curricolari</div>
            </div>

            <div class="stat-card purple">
                <div class="stat-header">
                    <span class="stat-icon">üìä</span>
                    <span class="stat-label">Correlazioni</span>
                </div>
                <div class="stat-value">153+</div>
                <div class="stat-subtitle">Mapping didattici</div>
            </div>

            <div class="stat-card orange">
                <div class="stat-header">
                    <span class="stat-icon">üìÖ</span>
                    <span class="stat-label">Visualizzati</span>
                </div>
                <div class="stat-value" id="filtered-count">37</div>
                <div class="stat-subtitle">Elementi filtrati</div>
            </div>
        </div>

        <!-- Controlli filtro -->
        <div class="filter-panel">
            <div class="filter-header">
                <span class="filter-icon">üîç</span>
                <h2>Filtri e Raggruppamento</h2>
            </div>

            <div class="filter-grid">
                <div class="filter-item">
                    <label for="competenza-filter">Competenza</label>
                    <select id="competenza-filter">
                        <option value="">Tutte le competenze</option>
                    </select>
                </div>

                <div class="filter-item">
                    <label for="periodo-filter">Periodo</label>
                    <select id="periodo-filter">
                        <option value="">Tutti i periodi</option>
                    </select>
                </div>

                <div class="filter-item">
                    <label for="livello-filter">Livello QNQ</label>
                    <select id="livello-filter">
                        <option value="">Tutti i livelli</option>
                    </select>
                </div>

                <div class="filter-item">
                    <label for="insegnamento-filter">Insegnamento</label>
                    <select id="insegnamento-filter">
                        <option value="">Tutti gli insegnamenti</option>
                    </select>
                </div>

                <div class="filter-item">
                    <label for="group-by">Raggruppa per</label>
                    <select id="group-by">
                        <option value="competenzaNum">Competenza</option>
                        <option value="periodo">Periodo</option>
                        <option value="livelloQNQ">Livello QNQ</option>
                        <option value="insegnamento">Insegnamento</option>
                    </select>
                </div>
            </div>

            <div class="search-row">
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="Cerca nei contenuti...">
                    <span class="search-icon">üîç</span>
                </div>
                <div class="actions-row">
                    <div style="display: flex; align-items: center; gap: 5px; margin-right: 10px;">
                        <select id="rubrica-select"
                            style="padding: 8px; border-radius: 4px; border: 1px solid #ddd; font-size: 14px;">
                            <option value="">üìä Seleziona Rubrica...</option>
                            <option value="metodologie">1. Metodologie Operative</option>
                            <option value="scienze_umane">2. Scienze Umane</option>
                            <option value="psicologia">3. Psicologia Gen. e Appl.</option>
                            <option value="igiene">4. Igiene e Cultura M.S.</option>
                            <option value="diritto">5. Diritto e T.A.</option>
                        </select>
                        <button onclick="apriRubricaSelezionata()" class="primary-btn"
                            style="background-color: #667eea; border-color: #667eea; padding: 8px 12px;">Vai</button>
                    </div>
                    <!-- Script per gestire apertura rubrica -->
                    <script>
                        function apriRubricaSelezionata() {
                            const select = document.getElementById('rubrica-select');
                            const val = select.value;
                            if (val) {
                                window.open(`rubrica.html?materia=${val}`, '_blank');
                            } else {
                                alert('Per favore, seleziona una materia dal menu a tendina.');
                            }
                        }
                    </script>
                    <button id="export-excel" class="primary-btn">Esporta Excel</button>
                    <button id="export-word" class="secondary-btn">Esporta Word</button>
                    <button id="export-json" class="secondary-btn">Esporta JSON</button>
                    <button id="reset-filters" class="reset-btn">Reset Filtri</button>
                </div>
            </div>
        </div>

        <!-- Statistiche insegnamenti -->
        <div class="stats-table-container">
            <div class="stats-table-header">
                <h3>Statistiche Complete per Insegnamento</h3>
            </div>
            <div class="stats-table-wrapper">
                <table id="stats-table" class="stats-table">
                    <thead>
                        <tr>
                            <th>Insegnamento</th>
                            <th>Competenze</th>
                            <th>Conoscenze</th>
                            <th>Periodi</th>
                            <th>Correlazioni</th>
                            <th>Carico Didattico</th>
                        </tr>
                    </thead>
                    <tbody id="stats-tbody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Tabella principale -->
        <div id="main-table-container" class="main-table-container">
        </div>

        <!-- Loading e empty state -->
        <div id="loading" class="loading hidden">Caricamento dati...</div>
        <div id="empty-state" class="empty-state hidden">
            <p>Nessun elemento corrisponde ai filtri selezionati.</p>
            <p>Prova a modificare i filtri o utilizzare il pulsante Reset.</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>